[TOC]
---

## 网络协议模型

OSI参考模型是国际标准，TCP/IP模型是这一标准的具体实现

![20200318161743.png](https://raw.githubusercontent.com/itisl/Pic_Bed/master/img/20200318161743.png)
> 1. 物理层：定义物理设备标准，如网线接口类型、介质传输速率。面向比特流(Bit)
> 2. 数据链路层：主机间通信。数据链路层在不可靠的物理介质上提供可靠的传输。面向以太网帧(Frame)
> 3. 网络层：网络层负责对子网间的数据包进行**路由选择**，以及实现拥塞控制、网络互连等功能。面向数据包(Packet)
> 4. 传输层：传输层的功能是使源端主机和目标端主机上的对等实体可以进行会话，即**端口到端口**的连接(Segment)
> 5. 会话层、表示层、应用层：规定应用程序的数据格式


###### TCP/IP数据包封装
用户数据自顶向下层层封装，传输到目的主机再自底向上得到用户数据。

![20200318190004.png](https://raw.githubusercontent.com/itisl/Pic_Bed/master/img/20200318190004.png)

### 网络接口层
#### 以太网帧

**以太网首部**

![20200318200200.png](https://raw.githubusercontent.com/itisl/Pic_Bed/master/img/20200318200200.png)

> - 目的地址/源地址：通信双方的MAC地址，目的地址未知时用`FF:FF:FF:FF:FF:FF`填充
> - 类型：协议类型编码
> - 数据：不超过MTU(1500)字节，因此以太网帧范围为64~1518

**MAC地址：**
> 网卡的硬件地址，6字节48位，前24位用于分配给不同厂商，后24位厂商自己分配，全球唯一。系统中的MAC地址是ARP协议ROM中记录的硬件地址，是可以修改的，因此可能有两个相同的MAC地址
##### MTU
#### ARP协议/RARP协议
**作用**：获取局域网中目标主机的物理地址(MAC地址)
**目的地址MAC地址未知时**
目的地址未知时用`FF:FF:FF:FF:FF:FF`填充，所有收到帧的主机会解析目的地址为`FF:FF:FF:FF:FF:FF`的以太帧，如果IP地址符合则接收。
### 网络层
#### IP协议
##### IP首部格式
![20200318185124.png](https://raw.githubusercontent.com/itisl/Pic_Bed/master/img/20200318185124.png)
##### IP分片
##### IP选路
#### ICMP协议
##### 报文分类
###### 查询
###### 差错
##### 应用
###### ping

### 传输层
#### UDP协议
#### TCP协议
##### 首部格式
##### 连接控制
###### 三次握手/四次挥手
###### `TIME_WAIT`、`CLOSE_WAIT`
##### 流量控制
###### 滑动窗口
###### 慢启动
###### 拥塞避免
###### 快速重传
###### 快速恢复
###### 超时重传

### 应用层
#### DNS协议
域名系统（DNS）是一个分布的数据库，由它来提供IP地址和域名之间的映射信息
##### 名字空间
##### DNS指针查询
##### DNS缓存
#### FTP协议
##### 工作模式
PASV
PORT
##### 指令和响应码
##### 断点续传
##### 匿名FTP
#### HTTP协议
##### 报文格式
##### HTTP状态码
#### HTTPS协议
##### 详细握手过程
##### 摘要算法
##### 数字签名
##### 数字证书