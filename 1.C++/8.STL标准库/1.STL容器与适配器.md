# STL容器与适配器
## 1. 容器的分类
> [标准容器的成员函数](http://cppds.com/cpp/container.html#)
### 1.1 常用数据结构
| 数据结构               | 常用操作                                                                                                        |
| ---------------------- | --------------------------------------------------------------------------------------------------------------- |
| 单向链表`forward_list` | `push_front`/`pop_front`/`front`/`empty`/<br>双向迭代器，不支持随机访问                                         |
| 双链表 `list`          | `front`/`push_front`/`pop_front`/<br>`back`/`push_back`/`pop_back`/`size`/`empty`<br>支持双向迭代器，不支持随机访问 |
| 双端队列`deque`        |                                                                                                                 |
| 双端队列`deque`        |                                                                                                                 |


### 1.2 关联容器
| 关联容器                | 说明                                                                                                     |
| ----------------------- | -------------------------------------------------------------------------------------------------------- |
| 字典`map`/`multimap`    | `key`-`value`对的集合，按`key`排序<br>`map`键值唯一，`multimap`键值对可以重复/不同  <br>底层实现为红黑树 |
| 无序字典`unordered_map` | `key`-`value`对的无序集合 <br>底层实现为哈希表                                                           |
| 集合`set`/ `multiset`   | `key`的集合，按`key`排序      `set`键唯一，`multiset`键可以重复 <br>底层实现为红黑树                     |
| 无序集合`unordered_set` | `key`的集合，无序 <br>底层实现为哈希表                                                                   |


## 2. 适配器
适配器是容器遵循特定规则的一种机制
| 容器             | 说明         |
| ---------------- | ------------ |
| 栈`stack`        | 元素先进后出 |
| 队列`queue`      | 元素先进先出 |
| `priority_queue` | 优先队列(堆) |


## 3. 迭代器
### 3.1 迭代器类型
| 迭代器                 | 类型                                                             |
| ---------------------- | ---------------------------------------------------------------- |
| `begin()`/`cbegin()`   | 起始迭代器 ，指向起始元素<br>`c`表示常量迭代器，不可以修改元素值 |
| `end()`/`cend()`       | 末尾迭代器，指向末尾元素的后一个位置                             |
| `rbegin()`/`crbegin()` | 逆向迭代器                                                       |
| `rend()`/`crend()`     | 逆向末尾迭代器                                                   |

![20210420131659](https://i.loli.net/2021/04/20/5LGeZ9UvTmwQJnr.png)


### 3.2 迭代器操作

| 操作                                 | 说明                                                                                                                                         |
| ------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------- |
| `+` / `-` / `++` / `--` / `*` / `->` | 和指针用法一样                                                                                                                               |
| `advance(p, n)`                      | 使迭代器 `p` 向前或向后移动 `n` 个元素。                                                                                                     |
| `distance(p, q)`                     | 计算两个迭代器之间的距离，即迭代器 `p` 经过多少次 `++` 操作后和迭代器 `q` 相等。如果调用时 `p` 已经指向 `q` 的后面，则这个函数会陷入死循环。 |
| `iter_swap(p, q)`                    | 用于交换两个迭代器 `p`、`q` 指向的值。                                                                                                       |


### 3.3 迭代器支持的容器
| 容器               | 迭代器功能   |
| :----------------- | :----------- |
| `vector`           | 随机访问     |
| `deque`            | 随机访问     |
| `list`             | 双向         |
| `set` / `multiset` | 双向         |
| `map` / `multimap` | 双向         |
| `stack`            | 不支持迭代器 |
| `queue`            | 不支持迭代器 |
| `priority_queue`   | 不支持迭代器 |


### 3.4 使用迭代器遍历
标准库容器（如`vector`）都可以使用迭代器（`string`不属于容器，但支持迭代器）
访问安全，但性能比指针低

```cpp
vector<int> arr(3);
auto b = arr.begin();//类似于指针类型，使用方法和指针一样
auto e = arr.end();//尾后迭代器（尾迭代器的下一位置）
// 使用迭代器进行迭代
for(auto it = b; it != b; ++it){
    ...
}
// 迭代器运算
iter += n //向前移动n个元素
iter -= n //向后移动n个元素
iter1 - iter2 //距离
```
> - 有些容器没有定义`<`运算符，但是都定义了`==`和`!=`，使用迭代器和!=就不用在意容器的类型
> - **向容器添加元素或删除元素将会使迭代器失效**。每次改变容器后都得正确的重新定位迭代器，原来位置的迭代器值未知